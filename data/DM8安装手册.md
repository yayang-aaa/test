![](media/beddb969625c4f454e8b4e7a593d1ddb.jpg)

**目录**

[第1章安装简介 2](#第1章安装简介)

[1.1 DM产品的构成 2](#dm产品的构成)

[1.2 硬件环境需求 6](#硬件环境需求)

[1.3 软件环境需求 6](#软件环境需求)

[1.4 计算机管理员准备工作 6](#计算机管理员准备工作)

[1.5 数据库管理员准备工作 7](#数据库管理员准备工作)

[1.6第三方代码及协议信息 7](#第三方代码及协议信息)

[第2章 DM安装及卸载 9](#第2章-dm安装及卸载)

[2.1 Windows下DM的安装与卸载 9](#windows下dm的安装与卸载)

[2.1.1 安装前准备工作 9](#安装前准备工作)

[2.1.2 安装DM 10](#安装dm)

[2.1.3 卸载DM 16](#卸载dm)

[2.2 Linux（Unix）下DM的安装与卸载 19](#linuxunix下dm的安装与卸载)

[2.2.1 安装前准备工作 19](#安装前准备工作-1)

[2.2.2 安装DM 23](#安装dm-1)

[2.2.3 卸载DM 34](#卸载dm-1)

[第3章许可证(License)的安装 39](#第3章许可证license的安装)

[3.1 Windows下License的安装 39](#windows下license的安装)

[3.2 Linux(Unix)下License的安装 39](#linuxunix下license的安装)

[第4章数据库配置工具使用说明 40](#第4章数据库配置工具使用说明)

[4.1 数据库配置工具使用说明 40](#数据库配置工具使用说明)

[附录1注意事项 48](#附录1注意事项)

[附录2 DM技术支持 53](#附录2-dm技术支持)

# **第1章安装简介**

达梦数据库管理系统(以下简称DM）是基于客户/服务器方式的数据库管理系统，可以安装在多种计算机操作系统平台上，典型的操作系统有：Windows(Windows2000/2003/XP/Vista/7/8/10/Server等)、Linux、HP-UNIX、Solaris、FreeBSD和AIX等。对于不同的系统平台，有不同的安装步骤。

在安装DM之前，请用户仔细阅读本手册，本手册包含了重要的安装指导信息。在安装开始之前，首先应该检查所得到的DM产品是否完整，并准备好DM所需的硬件环境、软件环境。

本章主要介绍在安装DM产品前需要进行的准备工作。

## **1.1 DM产品的构成**

DM产品包括产品光盘和相关的技术资料。

根据不同的应用需求与配置，DM提供了多种不同的产品系列：

1．标准版 Standard Edition

2．企业版 Enterprise Edition

3．安全版 Security Edition

-   **DM Standard Edition标准版**

DM标准版是为政府部门、中小型企业及互联网／内部网应用提供的数据管理和分析平台。它拥有数据库管理、安全管理、开发支持等所需的基本功能，支持TB级数据量，支持多用户并发访问等。该版本以其前所未有的易用性和高性价比，为政府或企业提供支持其操作所需的基本能力，并能够根据用户需求完美升级到企业版。

-   **DM Enterprise Edition企业版**

DM企业版是伸缩性良好、功能齐全的数据库，无论是用于驱动网站、打包应用程序，还是联机事务处理、决策分析或数据仓库应用，DM企业版都能作为专业的服务平台。DM企业版支持多CPU，支持TB级海量数据存储和大量的并发用户，并为高端应用提供了数据复制、数据守护等高可靠性、高性能的数据管理能力，完全能够支撑各类企业应用。

-   **DM Security Edition安全版**

DM安全版拥有企业版的所有功能，并重点加强了其安全特性，引入强制访问控制功能，采用数据库管理员(DBA)、数据库审计员(AUDITOR)、数据库安全员(SSO)三权分立安全机制，支持KERBEROS、操作系统用户等多种身份鉴别与验证，支持透明、半透明等存储加密方式以及审计控制、通信加密等辅助安全手段，使DM安全级别达到B1级，适合于对安全性要求更高的政府或企业敏感部门选用。

DM产品主要由数据库服务器和客户端程序两大部分组成。其中数据库服务器包括多种操作系统下的版本，主要有：

1．DM for Windows

2．DM for Linux

3．DM for Solaris

4．DM for AIX

5．DM for HP-UNIX

6．DM for FreeBSD

DM在代码级全面支持32位和64位系统。DM不仅能够运行在64位系统上，还能很好地利用64位系统的资源(例如能充分地利用更大容量的内存），在64位系统上表现出良好的性能。

DM客户端程序主要使用Java编写，具有良好的跨平台特性，可运行在上述操作系统上。客户端程序所用的操作系统与服务器所用的操作系统无关。

DM客户端程序主要有：

1．管理工具：Manager(图1.1)

2．数据迁移工具：DTS(图1.2)

3．控制台工具：Console(图1.3)

4．性能监控工具：Monitor(图1.4)

5．审计分析工具：Analyzer(图1.5)

6．ODBC驱动程序：dodbc

7．JDBC驱动程序：DmJdbcDriver.jar

8．OLEDB 驱动程序：doledb

9．C Language Tools：一组C语言开发的命令行工具

![](media/dbf195534009fc10c9e91e773cdc7944.png)

图1.1　管理工具Manager

![](media/bdc3618411e44d50f5759506502fd3da.png)

图1.2 数据迁移工具DTS

![](media/1e982b5d0553eb2baa34a606163aa6a4.png)

图1.3 控制台工具Console

![](media/164469c4bc43e30f73bd037a5745768e.png)

图1.4 性能监控工具Monitor

![](media/b8bf7fd051ba5edd22a0b28e99c9731a.png)

图1.5 审计分析工具Analyzer

## **1.2 硬件环境需求**

用户应根据DM及应用系统的需求来选择合适的硬件配置，如CPU的指标、内存及磁盘容量等。档次一般应尽可能高一些，尤其是作为数据库服务器的机器，基于Java的程序运行时最好有较大的内存。其它设备如UPS等在重要应用中也应考虑。下面给出安装DM所需的硬件基本配置：

表1.1 硬件环境需求

| **名称**  | **要求**                                    |
|-----------|---------------------------------------------|
| CPU       | Intel Pentium4(建议Pentium 41.6G以上)处理器 |
| 内存      | 256M(建议512M以上)                          |
| 硬盘      | 5G以上可用空间                              |
| 网卡      | 10M以上支持TCP/IP协议的网卡                 |
| 光驱      | 32倍速以上光驱                              |
| 显卡支持  | 1024\*768\*256以上彩色显示                  |
| 显示器    | SVGA显示器                                  |
| 键盘/鼠标 | 普通键盘/鼠标                               |

由于DM是基于客户/服务器方式的大型数据库管理系统，一般应在网络环境下使用，客户机与服务器分别在不同的机器上，所以硬件环境通常包括网络环境(如一个局域网)。

如果仅有单台PC，DM也允许将所有软件装在同一台PC上使用。

## **1.3 软件环境需求**

运行DM所要求的软件环境主要有：

表1.2 软件环境需求

| **名称** | **要求**                                                                                                         |
|----------|------------------------------------------------------------------------------------------------------------------|
| 操作系统 | Windows(简体中文服务器版sp2以上)/Linux(glibc2.3以上，内核2.6，已安装KDE/GNOME桌面环境，建议预先安装UnixODBC组件) |
| 网络协议 | TCP/IP                                                                                                           |
| 系统盘   | 至少1G以上的剩余空间                                                                                             |

此外，如要进行数据库应用开发，在客户端可配备VC、VB、DELPHI、C++Builder、PowerBuilder、JBuilder、Eclipse、DreamWeaver、Visual
Studio.NET等应用开发工具。如要使用DM
ODBC驱动程序，应确保Windows操作系统中已经安装有ODBC数据源管理器，并能正常工作。

## **1.4 计算机管理员准备工作**

在安装DM之前，计算机管理员应当首先完成安装前的准备工作。

主要准备工作有：

1.  正确地安装操作系统、合理地分配磁盘空间、检查机器配置是否满足要求；

2.  关闭正在运行的杀毒、安全防护等软件；

3.  保证网络环境能正常工作；

4.  在安装32位版本之前，还必须保证系统时间在1970年1月1日00:00:00到2038年1月19日03:14:07之间。

## **1.5 数据库管理员准备工作**

DM是客户/服务器结构的数据库管理系统。服务器可兼做客户机。在计算机管理员的准备工作都已完成之后，数据库管理员在安装过程中必须注意以下几点：

1.  若系统中已安装DM，重新安装前，应完全卸载原来的DM软件。并且在重新安装前，务必备份好数据。

2.  作为服务器的每台计算机必须安装DM服务器端组件，只作为客户机的计算机不必安装服务器端组件。

3.  作为客户机的每台计算机可在客户端组件中选择安装所需要的客户端组件。

## **1.6第三方代码及协议信息**

DM数据库产品中使用了一些第三方代码，所有DM服务器与接口使用的第三方代码名称及版本声明如下，对应的第三方代码的LICENSE放在DM数据库安装目录的samples/third_party_license子目录中。

**OPENSSL**

DM服务器的加密使用了OPENSSL，该软件的许可协议基于Apache License Version
2.0，其许可协议文件见上述文件夹的“APACHE_LICENSE-2.0”。

**xqilla和xerces**

DM服务器的XML支持相关模块使用了xqilla V2.3.3和xerces
V3.1.4，这两个软件组件的许可协议基于Apache License Version
2.0，其许可协议文件见上述文件夹的“APACHE_LICENSE-2.0”。DM对这两个软件的代码进行了部分修改，根据开源协议，DM已将修改后的代码进行了开源。

**GEOS**

DM服务器提供的DMGEO系统包使用了GEOS，该软件的许可协议基于LGPL，其许可协议文件见上述文件夹的“lgpl-2.1”。DM对该软件的代码进行了部分修改，根据开源协议，DM已将修改后的代码进行了开源。

**PHP/PDO**

DM的PHP接口使用了PHP/PDO，其许可协议文件见上述文件夹的“PHP-PDO-LICENSE”。DM对该软件的代码进行了部分修改，根据开源协议，DM已将修改后的代码进行了开源。

**ZLIB**

DM服务器的HUGE表压缩使用了ZLIB，该软件的许可协议文件见上述文件夹的“zlib_license”。

**SNAPPY**

DM服务器的一些压缩算法使用了SNAPPY，该软件的许可协议文件见上述文件夹的“SNAPPY-COPYING”。

**REGEX**

DM服务器的正则表达式解析使用了REGEX，该软件的许可协议文件见上述文件夹的“lgpl-2.1”。DM对该软件的代码进行了部分修改，根据开源协议，DM已将修改后的代码进行了开源。

另外，DM产品的图形化客户端工具也使用了一些第三方代码，相关的说明见DM数据库安装目录的samples/third_party_license子目录中的“readme”文件。

# **第2章 DM安装及卸载**

DM在各个操作系统下的数据库服务器版本具有相同的内核，本章介绍DM在Windows、Linux(Unix)操作系统下的安装。

注：根据版本的用途，安装DM程序后，默认装有一个许可证(License)。如果用户想拥有更多授权的许可证，请向达梦公司申请或购买，许可证(License)的安装方法具体参见[第3章许可证(License)的安装](#第3章许可证license的安装)。

## **2.1 Windows下DM的安装与卸载**

### 2.1.1 安装前准备工作

用户在安装DM之前需要检查或修改操作系统的配置，以保证DM正确安装和运行。

安装程序说明将以Windows 10 for
x86-64系统为例，由于Windows不同操作系统系统图形界面不尽相同，具体步骤及操作请以本机系统为准，具体细节可向系统管理员咨询。

#### 2.1.1.1 检查系统信息

用户在安装DM前，需要检查当前操作系统的相关信息，确认DM安装程序与当前操作系统匹配，以保证DM能够正确安装和运行。用户可以在终端中输入systeminfo命令进行查询。如下图所示：

![](media/5684a796a95079b6b48eae9117616e70.png)

图2.1查询系统信息

#### 2.1.1.2 检查系统内存与存储空间

**1.检查内存**

为了保证DM的正确安装和运行，要尽量保证操作系统至少1GB的可用内存(RAM)。如果可用内存过少，可能导致DM安装或启动失败。用户可以通过“任务管理器”查看可用内存。如下图所示：

![](media/7003b22e938f4eec446607e7f949cbe9.png)

图2.2 查看内存

**2.检查存储空间**

DM完全安装需要1GB的存储空间，用户需要提前规划好安装目录，预留足够的存储空间。用户在DM安装前也应该为数据库实例预留足够的存储空间，规划好数据路径和备份路径。

### 2.1.2 安装DM

**步骤1：运行安装程序**

用户将DM安装光盘放入光驱中，插入光盘后安装程序自动运行或直接双击“setup.exe”安装程序后，程序将检测当前计算机系统是否已经安装其他版本DM。如果存在其他版本DM，将弹出提示对话框，如图2.3所示。

![](media/e7ed4a76f8481e5c9939547eea39c3ff.png)

图2.3 确认界面

点击“确定”继续安装，将弹出语言与时区选择对话框。点击“取消”则退出安装。

**步骤2:语言与时区选择**

请根据系统配置选择相应语言与时区，点击“确定”按钮继续安装。如下图所示：

![1.JPG](media/4a47c2ea8744e96a1586b06d23a1d77e.jpg)

图2.4 选择语言与时区

**步骤3：欢迎页面**

点击“开始”按钮继续安装。如下图所示：

![2.JPG](media/eb9aa3b6953085b7678910ac04a8d270.jpg)

图2.5 欢迎界面

**步骤4：许可证协议**

在安装和使用DM之前，该安装程序需要用户阅读许可协议条款，用户如接受该协议，则选中“接受”，并点击“下一步”继续安装；用户若选中“不接受”，将无法进行安装。如下图所示：

![3.JPG](media/f9051958aa443b6c5c854f58297e6831.jpg)

图2.6 许可证协议

**步骤5：查看版本信息**

用户可以查看DM服务器、客户端等各组件相应的版本信息。如下图所示：

![4.JPG](media/55794daff2c41f0a876d448985c4754b.jpg)

图2.7 版本信息

**步骤6：验证Key文件**

用户点击“浏览”按钮，选取Key文件，安装程序将自动验证Key文件信息。如果是合法的Key文件且在有效期内，用户可以点击“下一步”继续安装。如下图所示：

![5.JPG](media/9a7c821324e5c002b52f0191665b0de6.jpg)

图2.8 Key文件

**步骤7：选择安装组件**

DM安装程序提供四种安装方式：“典型安装”、“服务器安装”、“客户端安装”和“自定义安装”，用户可根据实际情况灵活地选择。如下图所示：

典型安装包括：服务器、客户端、驱动、用户手册、数据库服务。

服务器安装包括：服务器、驱动、用户手册、数据库服务。

客户端安装包括：客户端、驱动、用户手册。

自定义安装包括：用户根据需求勾选组件，可以是服务器、客户端、驱动、用户手册、数据库服务中的任意组合。

![6.JPG](media/ba1c21b80be0340efc77cc5d182c2157.jpg)

图2.9 选择组件

选择需要安装的DM组件，并点击“下一步”继续。

一般地，作为服务器端的机器只需选择“服务器安装”选项，特殊情况下，服务器端的机器也可以作为客户机使用，这时，机器必须安装相应的客户端软件。

**步骤8：选择安装目录**

![7.JPG](media/114343fd9ee90d338f64e6def56cbb39.jpg)

图2.10 选择安装目录

DM默认安装在%HOMEDRIVE%\\dmdbms目录下，用户可以通过点击“浏览”按钮自定义安装目录。如果用户所指定的目录已经存在，则弹出下图所示警告消息框提示用户该路径已经存在。若确定在指定路径下安装请点击“确定”，则该路径下已经存在的DM某些组件，将会被覆盖；否则点击“取消”，返回到上图所示界面，重新选择安装目录。

![](media/1740a1d0669c2b4c6f69bbdf904afd98.png)

图2.11 确认安装目录

**说明：安装路径里的目录名由英文字母、数字和下划线等组成，不建议使用包含空格和中文字符的路径等。**

**步骤9：安装前小结**

显示用户即将进行的安装的有关信息，例如产品名称、版本信息、安装类型、安装目录、可用空间、可用内存等信息，用户检查无误后点击“安装”按钮进行DM的安装。如下图所示：

![9.JPG](media/5245cd35f025df17ed6e1e4e3e369639.jpg)

图2.12 安装前小结

**步骤10：安装过程**

安装过程。如下图所示：

![10.JPG](media/67a3c42fb68a4834d88f2bab9c063c2e.jpg)

图2.13 安装过程

**步骤11：初始化数据库**

如用户在选择安装组件时选中服务器组件，数据库自身安装过程结束时，将会提示是否初始化数据库，如下图所示。若用户未安装服务器组件，安装“完成”后，点击完成将直接退出。点击“取消”将完成安装，关闭对话框。

![11.JPG](media/c446aed33145d6018e8717f5f60ba88f.jpg)

图2.14 初始化数据库

若用户选中创建数据库选项，点击“初始化”将弹出数据库配置工具。如下图所示：

![](media/b3cc38ffed14d1348fa2a7e7c0425beb.png)

图2.15 欢迎使用达梦数据库配置助手

详细初始化步骤请参考[第4章数据库配置工具使用说明](#第4章数据库配置工具使用说明)。

### 2.1.3 卸载DM

DM提供的卸载方式为全部卸载。在Windows操作系统中在菜单里面找到“达梦数据库”，然后点击“卸载”菜单；也可以在DM安装目录下，找到卸载程序uninstall.exe来执行卸载。

**卸载步骤:**

**步骤1：运行卸载程序**

程序将会弹出提示框确认是否卸载程序。点击“确定”进入卸载小结页面，点击“取消”退出卸载程序。如下图所示：

![](media/d39744047bcf046c12ae5b09f66470db.jpg)

图2.16 确认卸载

**步骤2：卸载小结**

显示DM的卸载目录信息。点击“卸载”，开始卸载DM。如下图所示：

![12.JPG](media/3a0522beaa0b6ea68472d750e82a26e5.jpg)

图2.17 卸载小结

**步骤3：卸载**

显示卸载进度。如下图所示：

![](media/6443b04119897b1291bdca08982fa3a6.jpg)

图2.18 卸载进度

点击“完成”按钮结束卸载。卸载程序不会删除安装目录下有用户数据的库文件以及安装DM后使用过程中产生的一些文件。用户可以根据需要手工删除这些内容。如下图所示：

![14.JPG](media/713776156b77ebce9049786da9fde2a8.jpg)

图2.19 卸载完成

## **2.2 Linux（Unix）下DM的安装与卸载**

### 2.2.1 安装前准备工作

用户在安装DM之前需要检查或修改操作系统的配置，以保证DM正确安装和运行。

标题及下文中提到的Linux(Unix)，包括Linux、AIX、HP-UNIX、Solaris和FreeBSD操作系统。以下安装程序说明将以Red
Hat Enterprise Linux 6 for
x86-64系统为例，由于不同操作系统系统命令不尽相同，具体步骤及操作请以本机系统为准，具体细节可向系统管理员咨询。

#### 2.2.1.1 检查Linux(Unix)系统信息

如果用户的DM软件安装包是经过数字签名的，请参照以下步骤进行操作，其他情况请忽略此步骤。

软件安装包的数字签名校验：

1.  导入达梦公司的公钥，命令如下：

\#gpg --import dm-pub-key

1.  将达梦公司的公钥添加到绝对信任列表

\#gpg --edit-key 武汉达梦数据库有限公司 trust

1.  验证达梦安装包的数字签名

\# gpg --verify dm.sign dm8_setup_xxx.iso

步骤3输出结果是“完好的签名”(“Good Signature”)则表示安装包文件完好无损。

用户在安装DM前，需要检查当前操作系统的相关信息，确认DM安装程序与当前操作系统匹配，以保证DM能够正确安装和运行。用户可以使用以下命令检查操作系统基本信息。如下图所示：

\#获取系统位数

getconf LONG_BIT

\#查询操作系统release信息

lsb_release -a

\#查询系统信息

cat /etc/issue

\#查询系统名称

uname -a

![](media/65e3055e89715e8881053c53ed911c2a.png)

图2.20 检查Linux(Unix)系统信息

#### 2.2.1.2 创建安装用户

为了减少对操作系统的影响，用户不应该以root系统用户来安装和运行DM。用户可以在安装之前为DM创建一个专用的系统用户。可参考以下示例创建系统用户和组(并指定用户ID和组ID)，具体细节可向系统管理员咨询。

1.  创建安装用户组dinstall。

groupadd -g 12349 dinstall

1.  创建安装用户dmdba。

useradd -u 12345 -g dinstall -m -d /home/dmdba -s /bin/bash dmdba

1.  初始化用户密码。

passwd dmdba

1.  之后通过系统提示进行密码设置。

注意：创建安装系统用户完成后，安装手册之后的操作默认使用安装系统用户进行操作。

#### 2.2.1.3 Linux(Unix)下检查操作系统限制

在Linux(Unix)系统中，因为ulimit命令的存在，会对程序使用操作系统资源进行限制。为了使DM能够正常运行，建议用户检查当前安装用户的ulimit参数。

运行ulimit -a进行查询。如下图所示：

![](media/cb8980b044d9a2d954508a7d227ca7c2.png)

图2.21 查看ulimit参数

>   **参数使用限制：**

>   **1.data seg size**

data seg size (kbytes, -d)

>   建议用户设置为1048576(即1GB)以上或unlimited(无限制)，此参数过小将导致数据库启动失败。

>   **2. file size**

file size(blocks, -f)

>   建议用户设置为unlimited(无限制)，此参数过小将导致数据库安装或初始化失败。

>   **3. open files**

open files(-n)

>   建议用户设置为65536以上或unlimited(无限制)。

>   **4.virtual memory**

virtual memory (kbytes, -v)

>   建议用户设置为1048576(即1GB)以上或unlimited(无限制)，此参数过小将导致数据库启动失败。

如果用户需要为当前安装用户更改ulimit的资源限制，请修改文件/etc/security/limits.conf。

#### 2.2.1.4 检查系统内存与存储空间

**1.检查内存**

为了保证DM的正确安装和运行，要尽量保证操作系统至少1GB的可用内存(RAM)。如果可用内存过少，可能导致DM安装或启动失败。用户可以使用以下命令检查操作内存：

\#获取内存总大小

grep MemTotal /proc/meminfo

\#获取交换分区大小

grep SwapTotal /proc/meminfo

\#获取内存使用详情

free

![](media/f97258c99526e8f6238341ca901b5a2b.png)

图2.22 检查内存

**2.检查存储空间**

**1)**
DM完全安装需要1GB的存储空间，用户需要提前规划好安装目录，预留足够的存储空间。用户在DM安装前也应该为数据库实例预留足够的存储空间，规划好数据路径和备份路径。用户可使用以下命令检查存储空间:

\#查询目录/mount_point/dir_name可用空间

df -h /mount_point/dir_name

**2)**
DM安装程序在安装时将产生临时文件，临时文件需要1GB的存储空间，临时文件目录默认为**/tmp**。用户可以使用以下命令检查存储空间。如下图所示：

![](media/b51c57c7ffb94400789c709c501aae8c.png)

图2.23 检查存储空间

如果/tmp目录不能保证1GB的存储空间，用户可以扩展/tmp目录存储空间或者通过设置环境变量DM_INSTALL_TMPDIR指定安装程序的临时目录。具体命令如下所示:

\#以BASH为例:

mkdir -p /mount_point/dir_name

DM_INSTALL_TMPDIR=/mount_point/dir_name

export DM_INSTALL_TMPDIR

#### 2.2.1.5 设置JAVA环境

如果对安装程序和客户端运行的JAVA环境无特殊需求，可忽略此步骤。在运行安装程序之前，通过设置环境变量DM_JAVA_HOME指定特定的JAVA的目录，安装程序将使用此JAVA环境进行安装，且安装完成之后，客户端程序也将使用此JAVA环境。具体命令如下所示:

\#以BASH为例:

DM_JAVA_HOME=/mount_point/jdk_home_dir

export DM_JAVA_HOME

### 2.2.2 安装DM

用户应登录或切换到安装系统用户，进行以下安装步骤的操作(注：不建议使用root系统用户进行安装)。

将DM安装光盘放入光驱，然后加载(mount)光驱。一般可以通过执行下面的命令来加载光驱：

mount /dev/cdrom /mnt/cdrom

这里假定光驱对应的文件为/dev/cdrom且目标路径/mnt/cdrom已存在。

加载(mount)光驱后，在/mnt/cdrom目录下存在DMInstall.bin文件，
DMInstall.bin文件就是DM的安装程序。在运行安装程序前，需要赋予DMInstall.bin文件执行权限。具体命令如下所示：

chmod 755 ./DMInstall.bin

#### 2.2.2.1 图形化安装

用户双击DMInstall.bin或执行以下命令将运行DM的图形化安装。

./DMInstall.bin

**安装须知：**

1)
用户在进行图形化安装时，应当确认当前正处于图形化界面的运行环境，否则运行安装程序将报错。这种情况建议用户使用命令行安装DM。

2)
建议用户使用安装系统用户直接登录。如果用户在图形化界面中使用su命令切换至安装系统用户，可能导致启动图形化安装程序启动失败。具体情况请参考附录1：xhost配置。

**安装过程如下：**

**步骤1：提示对话框**

如果当前操作系统中已存在DM，将弹出提示对话框。如下图所示：

![](media/2977b857684bf72f0192d28f370e5c3d.jpg)

图2.24 确认

注意：若系统中已安装DM，重新安装前，应完全卸载原来的DM。并且在重新安装前，务必备份好数据。

**步骤2：选择语言和时区**

请根据系统配置选择相应语言与时区，点击“确定”按钮继续安装。如下图所示：

![](media/8277824195bbbb89d09920bf12cd7e22.jpg)

图2.25 选择语言与时区

**步骤3：欢迎页面**

点击“开始”按钮继续安装。如下图所示：

![2.bmp](media/dac278692b87cf075d7e4d871f6b7bf3.png)

图2.26 欢迎界面

**步骤4：许可证协议**

在安装和使用**DM**之前，该安装程序需要用户阅读许可协议条款，用户如接受该协议，则选中“接受”，并点击“下一步”继续安装；用户若选中“不接受”，将无法进行安装。如下图所示：

![](media/1a7a1a56ada1dbfe77c0079ba5bf234c.jpg)

图2.27 许可证协议

**步骤5：查看版本信息**

用户可以查看DM服务器、客户端等各组件相应的版本信息。如下图所示：

![](media/336420a6c97328ec11f82a861c42caca.jpg)

图2.28 版本信息

**步骤6：验证Key文件**

用户点击“浏览”按钮，选取Key文件，安装程序将自动验证Key文件信息。如果是合法的Key文件且在有效期内，用户可以点击“下一步”继续安装。如下图所示：

![](media/93f8dbb3c48c88951392cc77640e3778.jpg)

图2.29 Key文件

**步骤7：选择安装方式**

DM安装程序提供四种安装方式：“典型安装”、“服务器安装”、“客户端安装”和“自定义安装”，用户可根据实际情况灵活地选择。如下图所示：

典型安装包括：服务器、客户端、驱动、用户手册、数据库服务。

服务器安装包括：服务器、驱动、用户手册、数据库服务。

客户端安装包括：客户端、驱动、用户手册。

自定义安装包括：根据用户需要勾选组件，可以是服务器、客户端、驱动、用户手册、数据库服务中的任意组合。

![](media/86ff753b91e203e7a38baf2fb5b99be7.jpg)

图2.30 选择组件

一般地，作为服务器端的机器只需选择“服务器安装”选项，特殊情况下，服务器端的机器也可以作为客户机使用，这时，机器必须安装相应的客户端软件。

**步骤8：选择安装目录**

选择安装目录。如下图所示。

![](media/20b0728831e84443423bd84da4d403c9.jpg)

图2.31 选择安装位置

DM默认安装目录为\$HOME/dmdbms
(如果安装用户为root系统用户，则默认安装目录为/opt/dmdbms，但不建议使用root系统用户来安装DM)，用户可以通过点击“浏览”按钮自定义安装目录。如果用户所指定的目录已经存在，则弹出如下图所示警告消息框提示用户该路径已经存在。若确定在指定路径下安装请点击“确定”，则该路径下已经存在的DM某些组件，将会被覆盖；否则点击“取消”，返回到上图所示界面，重新选择安装目录。

![](media/c02833e33ac121c5949b0d6ed4fb41ec.jpg)

图2.32 确认安装目录

**说明：安装路径里的目录名由英文字母、数字和下划线等组成，不建议使用包含空格和中文字符的路径等。**

**步骤9：安装前小结**

显示用户即将进行的安装的有关信息，例如产品名称、版本信息、安装类型、安装目录、可用空间、可用内存等信息，用户检查无误后点击“安装”按钮，开始拷贝安装的软件。如下图所示：

![](media/cf5e3b6c53223472b4d0eed65b34be8a.jpg)

图2.33 安装前小结信息

**步骤10：安装**

安装。如下图所示。

![](media/bf310eaec2fb263b1c0cbb7687f14a2f.jpg)

图2.34 安装界面

注意：当安装进度完成时将会弹出对话框，提示使用**root**系统用户执行相关命令。用户可根据对话框的说明完成相关操作，之后可关闭此对话框，点击“完成”按钮结束安装。如下图所示：

![](media/062d08a4197057bdc17c353bad15f7ba.jpg)

图2.35 执行配置脚本

**步骤11：初始化数据库**

如用户在选择安装组件时选中服务器组件，DM安装过程结束时，将会提示是否初始化数据库，如下图所示。若用户未安装服务器组件，安装完成后，点击“完成”将直接退出，点击“取消”将完成安装，关闭对话框。

![](media/76f29f352b618ccf618eebbea9b7e5b9.jpg)

图2.36 初始化数据库

若用户选中创建数据库选项，点击“初始化”将弹出数据库配置工具。如下图所示：

![](media/19d2289d7ade618b8f2e35a7ea3b002b.jpg)

图2.37 达梦数据库配置助手

详细初始化步骤请参考[第4章数据库配置工具使用说明](#第4章数据库配置工具使用说明)。

#### 2.2.2.2 命令行安装

在现实中，许多Linux(Unix)操作系统上是没有图形化界面的，为了使DM能够在这些操作系统上顺利安装，DM提供了命令行的安装方式。在终端进入到安装程序所在文件夹，执行以下命令进行命令行安装：

./DMInstall.bin -i

**安装过程如下：**

**步骤1：选择安装语言**

请根据系统配置选择相应语言，输入选项，回车进行下一步。如下图所示：

![](media/82e5ebe02680f2431dc09465f3a3ef4a.png)

图2.38 选择安装语言

如果当前操作系统中已存在DM，将在终端弹出提示，输入选项：继续，将进行下一步的命令行安装，否则退出命令行安装。如下图所示：

![](media/98f5158a08b99065e4744f512ce2a772.png)

图2.39 是否继续

注意**：**若操作系统中已安装DM，重新安装前，应完全卸载已存在的DM。并且在重新安装前，务必备份好数据。

**步骤2：验证Key文件**

用户可以选择是否输入Key文件路径。不输入则进入下一步安装，输入Key文件路径，安装程序将显示Key文件的详细信息，如果是合法的Key文件且在有效期内，用户可以继续安装。如下图所示：

![](media/6634e0350b92fd50025b33c987f01768.png)

图2.40 验证Key文件

**步骤3：输入时区**

用户可以选择DM的时区信息。如下图所示：

![](media/5d399f255bee82f167832379bd5b80f2.png)

图2.41 输入时区

**步骤4：选择安装类型**

命令行安装与图形化安装的选择的安装类型是一样。如下图所示：

![](media/c4b9dd3a6a7fca59d13a55d417a971cf.png)

图2.42 选择安装类型

用户选择安装类型需要手动输入，默认是典型安装。如果用户选择自定义安装，将打印全部安装组件信息。用户通过命令行窗口输入要安装的组件序号，选择多个安装组件时需要使用空格进行间隔。输入完需要安装的组件序号后回车，将打印安装选择组件所需要的存储空间大小。

**步骤4：选择安装路径**

用户可以输入DM的安装路径，不输入则使用默认路径，默认值为\$HOME/dmdbms(如果安装用户为root，则默认安装目录为/opt/dmdbms，但不建议使用root系统用户来安装DM)。
如下图所示：

![](media/e0b207797f6ff1adbb621c81664b515c.png)

图2.43 选择安装路径

安装程序将打印当前安装路径的可用空间，如果空间不足，用户需重新选择安装路径。如果当前安装路径可用空间足够，用户需进行确认。不确认，则重新选择安装路径，确认，则进入下一步骤。

**步骤5：安装小结**

安装程序将打印用户之前输入的部分安装信息。如下图所示：

![](media/ed52c4b64e6b7f9001a8b885a22fc0c1.png)

图2.44 安装小结

用户对安装信息进行确认。不确认，则退出安装程序，确认，进行DM的安装。

**步骤6：安装**

![](media/6192a38ad62ccf020781bd27cf9e136b.png)

图2.45 安装过程

注意**：**安装完成后，终端提示“请以root系统用户执行命令”。由于使用非root系统用户进行安装，所以部分安装步骤没有相应的系统权限，需要用户手动执行相关命令。用户可根据提示完成相关操作。

**步骤7：初始化数据库与注册服务**

安装结束后，还需要初始化数据库并注册相关服务才能正式运行达梦数据库，具体可参考《DM8_dminit使用手册》和《DM8_Linux服务脚本使用手册》。

#### 2.2.2.3 静默安装

在某些特殊应用场景，用户可能需要非交互式的、通过配置文件进行DM的安装，这种情况我们可以采用以下静默安装的方式。在终端进入到安装程序所在文件夹，执行以下命令。如下图所示。

./DMInstall.bin -q 配置文件全路径

![](media/c39ec36dfc792f8e6535168ae29e28e9.png)

图2.46静默安装

备注：静默安装完成后，终端提示“请以root系统用户执行命令”。
由于使用非root系统用户进行安装，所以部分安装步骤没有相应的系统权限，需要用户手动执行相关命令。用户可根据提示完成相关操作。

静默安装配置文件相关说明详见[附录1 注意事项](#附录1注意事项)。

### 2.2.3 卸载DM

DM提供的卸载程序为全部卸载。Linux提供两种卸载方式，一种是图形化卸载方式，另一种是命令行卸载方式。

#### 2.2.3.1 图形化卸载

用户在DM安装目录下，找到卸载程序uninstall.sh来执行卸载。用户执行以下命令启动图形化卸载程序。

\#进入DM安装目录

cd /DM_INSTALL_PATH

\#执行卸载脚本

./uninstall.sh

**卸载步骤:**

**步骤1：运行卸载程序**

程序将会弹出提示框确认是否卸载程序。点击“确定”进入卸载小结页面，点击“取消”退出卸载程序。如下图所示：

![](media/4cbcaceb72f3d65943cd765c8acaa1a3.png)

图2.47 确认卸载

**步骤2：卸载小结**

显示DM的卸载目录信息。点击“卸载”，开始卸载**DM**。如下图所示。

![](media/25aca591e5437f2d5b8536a3c9a45f48.jpg)

图2.48 准备卸载

**步骤3：卸载**

显示卸载进度。如下图所示：

![](media/425883b73f48a47beb7e1d2d9d6bae11.jpg)

图2.49 卸载

在Linux(Unix)系统下，使用非root用户卸载完成时，将会弹出对话框，提示使用root执行相关命令，用户可根据对话框的说明完成相关操作，之后可关闭此对话框。如下图所示：

![](media/f2a3199520728b464f5c990060b7ad2f.jpg)

图2.50 执行配置脚本

点击“完成”按钮结束卸载。卸载程序不会删除安装目录下有用户数据的库文件以及安装DM后使用过程中产生的一些文件。用户可以根据需要手工删除这些内容。如下图所示：

![](media/b541e1cdd8ac752ce83a4d4910bbfbeb.jpg)

图2.51 卸载完成

#### 2.2.3.2 命令行卸载

用户在DM安装目录下，找到卸载程序uninstall.sh来执行卸载。用户执行以下命令启动命令行卸载程序。

\#进入DM安装目录

cd /DM_INSTALL_PATH

\#执行卸载脚本命令行卸载需要添加参数-i

./uninstall.sh -i

**卸载步骤:**

**步骤1：运行卸载程序**

终端窗口将提示确认是否卸载程序，输入“y/Y”开始卸载DM，输入“n/N”退出卸载程序。如下图所示：

![](media/ab178187f976ea8645ab255a08c03729.png)

图2.52 运行卸载程序

**步骤2：卸载**

显示卸载进度。如下图所示：

![](media/1a89a7a69de9f5c7ae19ad22097697e2.png)

图2.53 卸载

在Linux(Unix)系统下，使用非root用户卸载完成时，终端提示“请以root系统用户执行命令”。用户需要手动执行相关命令。如下图所示：

![](media/1371aac5ce23ae379225fbc88b79b57e.png)

图2.54 提示使用root用户执行命令

# **第3章许可证(License)的安装**

用户安装DM时，可导入相应的许可证(License)。License的载体是一个加密文件dm.key，内容是达梦公司对用户使用DM软件的授权。DM软件安装后，如果需要得到更多授权的用户，可联系达梦公司获取相应的License，并按照下面的操作方法进行安装。

## **3.1 Windows下License的安装**

用户获得License文件dm.key后，首先将达梦服务器关闭，然后将dm.key复制到DM安装目录下，DM服务器所在的子目录中即可。

**操作方法如下**：

首先，打开DM服务器所在的目录。

例如，当DM安装目录为C:\\dmdbms时，则DM服务器所在的目录为C:\\dmdbms\\bin。然后，先将达梦服务器关闭，再将dm.key复制到该目录下，替换原来的dm.key文件即可。

说明：该目录下原有的dm.key文件请事先做好备份。

## **3.2 Linux(Unix)下License的安装**

用户获得License文件dm.key后，首先将达梦服务器关闭，然后将dm.key复制到DM安装目录下，DM服务器所在的子目录中即可。这与Windows下License的安装类似。

**操作方法如下**：

首先，找到DM服务器所在的目录，方法是以root用户或安装用户登录到Linux系统，启动终端，执行以下命令即可进入DM服务器程序安装的目录：

\#注：假设安装目录为/opt/dmdbms

cd /opt/dmdbms/bin

然后，先将达梦服务器关闭，再将dm.key文件拷贝到该目录，替换原有的dm.key即可。

说明：该目录下原有的dm.key文件请事先做好备份。  


# **第4章数据库配置工具使用说明**

用户安装完成DM时，如果已选择安装服务器组件，并且确定安装初始化数据库，安装程序将调用数据库配置工具(database
configuration assistant，简称为DBCA)来实现数据库初始化。

以下内容将重点介绍创建数据库实例步骤，删除数据库实例、注册数据库服务、删除数据库服务将不在此进行描述，具体步骤请参见达梦数据库联机帮助或《DM8系统管理员手册》。

![](media/b3cc38ffed14d1348fa2a7e7c0425beb.png)

图4.1达梦数据库配置助手

## **4.1 数据库配置工具使用说明**

数据库配置工具的图形界面在各个操作系统上保持一致，用户可通过数据库配置工具来设置数据库初始化的参数及属性，并且选择是否安装示例库。

**步骤1：选择操作方式**

用户可选择创建数据库实例、删除数据库实例、注册数据库服务和删除数据库服务四种操作方式，本章只详细介绍创建数据库实例的使用步骤，删除数据库实例、注册数据库服务和删除数据库服务的详细操作，请参见达梦数据库联机帮助或达梦系统管理员手册。如下图所示：

![](media/b3cc38ffed14d1348fa2a7e7c0425beb.png)

图4.2 选择操作方式

选择创建数据库实例，点击“开始”进入下一步骤。

**步骤2：创建数据库模板**

系统提供三套数据库模板供用户选择：一般用途、联机分析处理和联机事务处理，用户可根据自身的用途选择相应的模板。如下图所示：

![](media/f10f4f4fda750a6b4a20475a87fc23e4.png)

图4.3 创建数据库模板

**步骤3：选择数据库目录**

用户可通过浏览或是输入的方式选择数据库所在目录。如下图所示：

![](media/9c49336a83509b643b0af4c3c94431dc.png)

图4.4 选择数据库目录

**步骤4：输入数据库标识**

用户可输入数据库名称、实例名、端口号等参数。如下图所示：

![](media/dcce2867ca9d4ba4ae42d909fb0e0bcb.png)

图4.5 数据库标识

**步骤5：数据库文件所在位置**

用户可通过选择或输入确定数据库控制、数据库日志等文件的所在位置，并可通过右侧功能按钮，对文件进行添加或删除。如下图所示：

![](media/0ed18e77a30bd0106961696a7917db36.png)

图4.6 数据库文件所在位置

**步骤6：数据库初始化参数**

用户可输入数据库相关参数，如簇大小、页大小、日志文件大小、选择字符集、是否大小写敏感等。如下图所示：

![](media/3494355506debad9ba543bd1dfb4f84f.png)

图4.7 数据库初始化参数

**步骤7：口令管理**

用户可输入SYSDBA，SYSAUDITOR的密码，对默认口令进行更改，如果安装版本为安全版，将会增加SYSSSO用户的密码修改。如下图所示：

![](media/6dcd6f6308a3475493cebee4b9ea931c.png)

图4.8 口令管理

**步骤8：选择创建示例库**

用户可选择是否创建示例库BOOKSHOP或DMHR。如下图所示：

![](media/575c388805a9c00be26e79b03b378772.png)

图4.9 创建示例库

**步骤9：创建数据库摘要**

在安装数据库之前，将显示用户通过数据库配置工具设置的相关参数。如下图所示：

![](media/382e9b56c41356b67ab88e822c1df115.png)

图4.10 创建数据库摘要

点击“完成”进行数据库实例的初始化工作。

如果数据库配置工具运行在Linux(Unix)系统中，点击“完成”时，将弹出提示框，提示当前ulimit的相关参数和修改建议。用户可参见[2.2.1
安装前准备工作](#安装前准备工作-1)。如下图所示：

![](media/fefdc44f2b00e3d088b98aacae8ec41a.png)

图4.11 关于ulimit参数的提示

**步骤10：安装初始化数据库**

如下图所示：

![](media/36c2d3e1ed5506e1a3a4212f797c4ce8.png)

图4.12 创建数据库

安装完成后将弹出数据库相关参数及文件位置。

![](media/2dd984dbf44d902c2c4db006c27806fd.png)

图4.13 创建数据库完成

点击完成，安装初始化数据库完成。

如果数据库配置工具运行在Linux(Unix)系统中，使用非root系统用户在初始化数据库完成时，将弹出提示框，提示应以root系统用户执行以下命令，用来创建数据库的随机启动服务。如下图所示：

![](media/233806fe32b39f151119923bd2db40c1.png)

图4.14 执行配置脚本

# **附录1注意事项**

1.  **xhost配置**

用户如果使用root系统用户登录图形化环境，并且使用su命令切换到安装系统用户进行图形化安装，可能导致启动图形化安装程序失败。用户需要配置xhost，命令如下所示，具体步骤及操作请以本机系统为准，具体细节可向系统管理员咨询。

\#以BASH为例，设置xhost

xhost + localhost

\#注：假设安装系统用户为dmdba

su - dmdba

\#切换至安装系统用户后执行图形化安装程序

\#用户可以执行xclock命令进行测试，如果xclock系统命令存在，将出现图形化的时钟，如果运行失败，则设置xhost失败，具体细节可向系统管理员咨询。

./DMInstall.bin

1.  **静默安装配置文件模板**

\<?xml version="1.0"?\>

\<DATABASE\>

\<!--安装数据库的语言配置，安装中文版配置ZH，英文版配置EN，不区分大小写。不允许为空。
--\>

\<LANGUAGE\>zh\</LANGUAGE\>

\<!--安装程序的时区配置，默认值为+08:00，范围：-12:59 \~ +14:00 --\>

\<TIME_ZONE\>+08:00\</TIME_ZONE\>

\<!-- key文件路径 --\>

\<KEY\>\</KEY\>

\<!--安装程序组件类型，取值0、1、2，0 表示安装全部，1 表示安装服务器，2
表示安装客户端。默认为0。 --\>

\<INSTALL_TYPE\>0\</INSTALL_TYPE\>

\<!--安装路径，不允许为空。 --\>

\<INSTALL_PATH\>\</INSTALL_PATH\>

\<!--是否初始化库，取值Y/N、y/n，不允许为空。 --\>

\<INIT_DB\>\</INIT_DB\>

\<!--数据库实例参数 --\>

\<DB_PARAMS\>

\<!--初始数据库存放的路径，不允许为空 --\>

\<PATH\>\</PATH\>

\<!--初始化数据库名字，默认是DAMENG，不超过128个字符 --\>

\<DB_NAME\>DAMENG\</DB_NAME\>

\<!--初始化数据库实例名字，默认是DMSERVER，不超过128个字符 --\>

\<INSTANCE_NAME\>DMSERVER\</INSTANCE_NAME\>

\<!--初始化时设置dm.ini中的PORT_NUM，默认5236，取值范围：1024\~65534 --\>

\<PORT_NUM\>5236\</PORT_NUM\>

\<!--初始数据库控制文件的路径，文件路径长度最大为256 --\>

\<CTL_PATH\>\</CTL_PATH\>

\<!--初始数据库日志文件的路径，文件路径长度最大为256 --\>

\<LOG_PATHS\>

\<LOG_PATH\>

\</LOG_PATH\>

\</LOG_PATHS\>

\<!--数据文件使用的簇大小，只能是16页或32页之一，缺省使用16页 --\>

\<EXTENT_SIZE\>16\</EXTENT_SIZE\>

\<!--数据文件使用的页大小，缺省使用8K，只能是4K、8K、16K或32K之一 --\>

\<PAGE_SIZE\>8\</PAGE_SIZE\>

\<!--日志文件使用的簇大小，默认是256，取值范围64和2048之间的整数 --\>

\<LOG_SIZE\>256\</LOG_SIZE\>

\<!--标识符大小写敏感，默认值为Y。只能是’Y’, ’y’, ’N’, ’n’, ’1’, ’0’之一 --\>

\<CASE_SENSITIVE\>Y\</CASE_SENSITIVE\>

\<!--字符集选项，默认值为0。0代表GB18030,1代表UTF-8,2代表韩文字符集EUC-KR --\>

\<CHARSET\>0\</CHARSET\>

\<!--设置为1时，所有VARCHAR类型对象的长度以字符为单位，否则以字节为单位。默认值为0。
--\>

\<LENGTH_IN_CHAR\>0\</LENGTH_IN_CHAR\>

\<!--字符类型在计算HASH值时所采用的HASH算法类别。0：原始HASH算法；1：改进的HASH算法。默认值为1。
--\>

\<USE_NEW_HASH\>1\</USE_NEW_HASH\>

\<!--初始化时设置SYSDBA的密码，默认为SYSDBA，长度在9到48个字符之间 --\>

\<SYSDBA_PWD\>\</SYSDBA_PWD\>

\<!--初始化时设置SYSAUDITOR的密码，默认为SYSAUDITOR，长度在9到48个字符之间 --\>

\<SYSAUDITOR_PWD\>\</SYSAUDITOR_PWD\>

\<!--初始化时设置SYSSSO的密码，默认为SYSSSO，长度在9到48个字符之间，仅在安全版本下可见和可设置
--\>

\<SYSSSO_PWD\>\</SYSSSO_PWD\>

\<!--初始化时设置SYSDBO的密码，默认为SYSDBO，长度在9到48个字符之间，仅在安全版本下可见和可设置
--\>

\<SYSDBO_PWD\>\</SYSDBO_PWD\>

\<!--初始化时区，默认是东八区。格式为：正负号小时：分钟，范围：-12:59 \~ +14:00
--\>

\<TIME_ZONE\>+08:00\</TIME_ZONE\>

\<!--是否启用页面内容校验，0：不启用；1：简单校验；2：严格校验(使用CRC16算法生成校验码)。默认0
--\>

\<PAGE_CHECK\>0\</PAGE_CHECK\>

\<!--设置默认加密算法，不超过128个字符 --\>

\<EXTERNAL_CIPHER_NAME\>\</EXTERNAL_CIPHER_NAME\>

\<!--设置默认HASH算法，不超过128个字符 --\>

\<EXTERNAL_HASH_NAME\>\</EXTERNAL_HASH_NAME\>

\<!--设置根密钥加密引擎，不超过128个字符 --\>

\<EXTERNAL_CRYPTO_NAME\>\</EXTERNAL_CRYPTO_NAME\>

\<!--全库加密密钥使用的算法名。算法可以是DM内部支持的加密算法，或者是第三方的加密算法。默认使用"AES256_ECB"算法加密，最长为128个字节
--\>

\<ENCRYPT_NAME\>\</ENCRYPT_NAME\>

\<!--指定日志文件是否加密。默认值 N。取值Y/N，y/n，1/0 --\>

\<RLOG_ENC_FLAG\>N\</RLOG_ENC_FLAG\>

\<!--用于加密服务器根密钥，最长为48个字节 --\>

\<USBKEY_PIN\>\</USBKEY_PIN\>

\<!--设置空格填充模式，取值0或1，默认为0 --\>

\<BLANK_PAD_MODE\>0\</BLANK_PAD_MODE\>

\<!--指定system.dbf文件的镜像路径，默认为空 --\>

\<SYSTEM_MIRROR_PATH\>\</SYSTEM_MIRROR_PATH\>

\<!--指定main.dbf文件的镜像路径，默认为空 --\>

\<MAIN_MIRROR_PATH\>\</MAIN_MIRROR_PATH\>

\<!--指定roll.dbf文件的镜像路径，默认为空 --\>

\<ROLL_MIRROR_PATH\>\</ROLL_MIRROR_PATH\>

\<!--是否是四权分立，默认值为0(不使用)。仅在安全版本下可见和可设置。只能是0或1
--\>

\<PRIV_FLAG\>0\</PRIV_FLAG\>

\<!--指定初始化过程中生成的日志文件所在路径。合法的路径，文件路径长度最大为257(含结束符)，不包括文件名--\>

\<ELOG_PATH\>\</ELOG_PATH\>

\</DB_PARAMS\>

\<!--是否创建数据库实例的服务，值 Y/N
y/n，不允许为空，不初始化数据库将忽略此节点。非root用户不能创建数据库服务。 --\>

\<CREATE_DB_SERVICE\>Y\</CREATE_DB_SERVICE\>

\<!--是否启动数据库，值 Y/N y/n，不允许为空，不创建数据库服务将忽略此节点。 --\>

\<STARTUP_DB_SERVICE\>N\</STARTUP_DB_SERVICE\>

\</DATABASE\>

1.  **root安装**

如果使用root系统用户进行安装，DM安装程序将更改安装目录的所有者。可分为以下几种情况：

1) 系统中存在dmdba系统用户

DM将更改安装目录的所有者为dmdba系统用户，更改所有组为dmdba系统用户的默认组。

2) 系统中不存在dmdba系统用户，但存在dinstall组

DM将创建dmdba系统用户，并设置dmdba系统用户默认组为dinstall。DM将更改安装目录所有者为dmdba，更改所有组为dinstall。

3) 系统中不存在dmdba系统用户，也不存在dinstall组

DM将创建dmdba系统用户和dinstall组，并设置dmdba系统用户默认组为dinstall。DM将更改安装目录所有者为dmdba，更改所有组为dinstall。

注：不建议用户使用root系统用户进行安装，同样我们也不建议用户使用root系统用户初始化和运行DM数据库系统和客户端工具。

1.  **文件权限**

为了保证数据库文件权限的正确性，DM对dminit和dmserver执行文件的权限进行了修改。

通过chmod命令将dminit和dmserver设置6755的权限。如下图所示:

![](media/a8890c775e292d2b92949915585758c1.png)

通过设置6755的权限，能够保证用户使用不同操作系统用户运行dminit和dmserver时，真正的进程用户、用户组是一致的(与dminit和dmserver的文件所有者与所有组相同）。具体细节可向系统管理员咨询。

注：为了保证系统的安全性，dminit执行程序只有root系统用户和文件所有者用户能够运行。禁止以其他系统用户运行。

另外，由于部分执行文件在运行时需要root权限，DM对dmcss执行文件的权限进行了修改。首先将dmcss的所有者与所有组更改为root系统用户以及root系统用户的默认组，并通过chmod命令对dmcss执行文件设置6755的权限。如下图所示:

![](media/988a25d2c973a94950581571c07310c3.png)

通过更改文件所有者和设置6755的权限，能够保证用户在运行dmcss执行程序时，拥有root系统用户的权限，保证dmcss执行程序的正确运行。具体细节可向系统管理员咨询。

# **附录2 DM技术支持**

如果您在安装或使用**DM**及其相应产品时出现了问题，请首先访问我们的Web站点<http://www.dameng.com/>。在此站点我们收集整理了安装使用过程中一些常见问题的解决办法，相信会对您有所帮助。

您也可以通过以下途径与我们联系，我们的技术支持工程师会为您提供服务。

>   **达梦数据库（武汉)有限公司**

>   地址：武汉市东湖高新技术开发区高新大道999号未来科技大厦C3栋16-19层

>   邮编：430073

>   电话：(+86)027-87588000

>   传真：(+86)027-87588000-8039

>   **达梦数据库（北京）有限公司**

>   地址：北京市海淀区北三环西路48号数码大厦B座905

>   邮编：100086

>   电话：(+86)010-51727900

>   传真：(+86)010-51727983

>   **达梦数据库（上海）有限公司**

>   地址：上海市闸北区江场三路28号301室

>   邮编：200436

>   电话：(+86)021-33932716

>   传真：(+86)021-33932718

>   地址：上海市浦东张江高科技园区博霞路50号403室

>   邮编：201203

>   电话：（+86）021-33932717

>   传真：（+86）021-33932717-801

>   **达梦数据库（广州）有限公司**

>   地址：广州市荔湾区中山七路330号荔湾留学生科技园703房

>   邮编：510145

>   电话：(+86)020-38371832

>   传真：(+86)020-38371832

>   **达梦数据库（海南）有限公司**

>   地址：海南省海口市玉沙路富豪花园B座1602室

>   邮编：570125

>   电话：(+86)0898-68533029

>   传真：(+86)0898-68531910

>   **达梦数据库（南宁）办事处**

>   地址：广西省南宁市科园东五路四号南宁软件园五楼

>   邮编：530003

>   电话：（+86）0771-2184078

>   传真：（+86）0771-2184080

>   **达梦数据库（合肥）办事处**

>   地址：合肥市包河区马鞍山路金帝国际城7栋3单元706室

>   邮编：230022

>   电话：（+86）0551-3711086

>   **达梦数据库（深圳）办事处**地址：深圳市福田区皇岗路高科利大厦A栋24E邮编：518033

>   电话：0755-83658909

>   传真：0755-83658909

**技术服务**：

电话：400-648-9899

邮箱：<tech@dameng.com>

![](media/ea418554fffa47000ef30c9ecbb3ec58.jpg)
